<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المساعد القانوني الذكي - AI Legal Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z" stroke-width="2"/>
                    </svg>
                    <span class="logo-text">المساعد القانوني الذكي</span>
                </div>
                <nav class="nav">
                    <a href="#" class="nav-link active">الرئيسية</a>
                    <a href="#" class="nav-link">خدماتنا</a>
                    <a href="#" class="nav-link">من نحن</a>
                    <a href="#" class="nav-link">تواصل معنا</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main" id="app">
        <!-- Dashboard View (Home Page) -->
        <section class="dashboard-view active-view" id="dashboardView">
            <div class="container">
                <div class="hero">
                    <h1 class="hero-title">مساعدك القانوني الذكي</h1>
                    <p class="hero-subtitle">نبسط لك القانون المصري بتقنية الذكاء الاصطناعي</p>
                </div>

                <div class="features-grid" id="featuresGrid">
                    <!-- Features will be dynamically loaded -->
                </div>

                <div class="recent-section">
                    <h2 class="section-title">المستندات الأخيرة</h2>
                    <div class="recent-documents" id="recentDocuments">
                        <!-- Recent documents will be dynamically loaded -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Chat View (Like ChatGPT) -->
        <section class="chat-view" id="chatView">
            <div class="chat-container">
                <!-- Sidebar -->
                <aside class="chat-sidebar" id="chatSidebar">
                    <button class="back-to-home-btn" onclick="app.showView('dashboard')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M15 18l-6-6 6-6" stroke-width="2"/>
                        </svg>
                        العودة للرئيسية
                    </button>
                    
                    <button class="new-chat-btn" onclick="app.startNewChat()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 4v16m8-8H4" stroke-width="2"/>
                        </svg>
                        محادثة جديدة
                    </button>
                    
                    <div class="chat-history-section">
                        <h3 class="sidebar-title">المحادثات السابقة</h3>
                        <div class="chat-history-list" id="chatHistoryList">
                            <!-- Chat history will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="sidebar-footer">
                        <div class="user-profile">
                            <div class="user-avatar">م</div>
                            <span class="user-name">مستخدم</span>
                        </div>
                    </div>
                </aside>

                <!-- Main Chat Area -->
                <div class="chat-main">
                    <!-- Welcome Screen (shown when no messages) -->
                    <div class="welcome-screen" id="welcomeScreen">
                        <div class="welcome-content">
                            <p class="welcome-message">ابدأ محادثة جديدة مع مساعدك القانوني الذكي</p>
                        </div>
                    </div>

                    <!-- Messages Container -->
                    <div class="messages-container hidden" id="messagesContainer">
                        <div class="messages-list" id="messagesList">
                            <!-- Messages will be added here -->
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="chat-input-area">
                        <div class="input-wrapper">
                            <button class="attach-btn" onclick="app.attachFile()" title="إرفاق ملف">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" stroke-width="2"/>
                                </svg>
                            </button>
                            <input type="file" id="fileAttachment" accept=".pdf,.docx,.doc,.jpg,.jpeg,.png" hidden>
                            
                            <textarea 
                                class="main-chat-input" 
                                id="mainChatInput" 
                                placeholder="اكتب سؤالك القانوني هنا..."
                                rows="1"
                            ></textarea>
                            
                            <button class="send-btn" id="mainSendBtn" onclick="app.sendMainMessage()">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                                </svg>
                            </button>
                        </div>
                        <p class="input-hint">مُعين يمكن أن يخطئ. تحقق من المعلومات المهمة.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Document Analysis View -->
        <section class="analysis-view" id="analysisView">
            <div class="container">
                <button class="back-btn" onclick="app.showView('dashboard')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M15 18l-6-6 6-6" stroke-width="2"/>
                    </svg>
                    العودة للرئيسية
                </button>

                <h1 class="page-title">تحليل المستندات القانونية</h1>

                <!-- Upload Area -->
                <div class="upload-section" id="uploadSection">
                    <div class="upload-zone" id="uploadZone">
                        <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-width="2"/>
                        </svg>
                        <h3 class="upload-title">اسحب المستند هنا أو انقر للتحميل</h3>
                        <p class="upload-subtitle">PDF, DOCX, أو صورة (حتى 10 ميجابايت)</p>
                        <input type="file" id="fileInput" accept=".pdf,.docx,.doc,.jpg,.jpeg,.png" hidden>
                    </div>
                </div>

                <!-- Processing Indicator -->
                <div class="processing-section hidden" id="processingSection">
                    <div class="progress-container">
                        <div class="progress-steps" id="progressSteps"></div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                </div>

                <!-- Results Area -->
                <div class="results-section hidden" id="resultsSection">
                    <div class="results-grid">
                        <div class="summary-panel">
                            <h2 class="panel-title">الملخص بلغة مبسطة</h2>
                            <div class="summary-content" id="summaryContent"></div>
                        </div>
                        <div class="chat-panel">
                            <h2 class="panel-title">اسأل عن المستند</h2>
                            <div class="chat-messages" id="chatMessages"></div>
                            <div class="chat-input-container">
                                <input type="text" class="chat-input" id="chatInput" placeholder="اكتب سؤالك هنا...">
                                <button class="chat-send-btn" id="chatSendBtn">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Template Generation View -->
        <section class="template-view" id="templateView">
            <div class="container">
                <button class="back-btn" onclick="app.showView('dashboard')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M15 18l-6-6 6-6" stroke-width="2"/>
                    </svg>
                    العودة للرئيسية
                </button>

                <h1 class="page-title">إنشاء عقد قانوني</h1>

                <!-- Template Selection -->
                <div class="template-selection" id="templateSelection">
                    <h2 class="section-title">اختر نوع العقد</h2>
                    <div class="template-grid" id="templateGrid"></div>
                </div>

                <!-- Guided Input Form -->
                <div class="guided-form hidden" id="guidedForm">
                    <div class="form-progress">
                        <div class="progress-indicator" id="formProgressIndicator"></div>
                    </div>
                    <div class="form-content" id="formContent"></div>
                    <div class="form-actions">
                        <button class="btn btn-secondary" id="prevStepBtn">السابق</button>
                        <button class="btn btn-primary" id="nextStepBtn">التالي</button>
                    </div>
                </div>

                <!-- Contract Preview -->
                <div class="contract-preview hidden" id="contractPreview">
                    <h2 class="section-title">معاينة العقد</h2>
                    <div class="preview-content" id="previewContent"></div>
                    <div class="preview-actions">
                        <button class="btn btn-secondary" onclick="app.editContract()">تعديل</button>
                        <button class="btn btn-primary" onclick="app.downloadContract('pdf')">تحميل PDF</button>
                        <button class="btn btn-primary" onclick="app.downloadContract('docx')">تحميل DOCX</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Legal Term Explanation View -->
        <section class="explanation-view" id="explanationView">
            <div class="container">
                <button class="back-btn" onclick="app.showView('dashboard')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M15 18l-6-6 6-6" stroke-width="2"/>
                    </svg>
                    العودة للرئيسية
                </button>

                <h1 class="page-title">شرح المصطلحات القانونية</h1>

                <div class="explanation-container">
                    <div class="search-box">
                        <input type="text" class="term-input" id="termInput" placeholder="أدخل المصطلح القانوني...">
                        <button class="btn btn-primary" id="explainBtn">شرح</button>
                    </div>
                    <div class="explanation-result hidden" id="explanationResult"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer with Disclaimer -->
    <footer class="footer">
        <div class="container">
            <div class="disclaimer">
                <svg class="disclaimer-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                </svg>
                <p>هذه الخدمة توفر معلومات ومساعدة قانونية، وليست استشارة قانونية رسمية. يُرجى استشارة محامٍ مرخص للأمور الرسمية.</p>
            </div>
        </div>
    </footer>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
